<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Weight Tracker</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --bg: #fff;
      --text: #000;
    }
    [data-theme="dark"] {
      --bg: #121212;
      --text: #f0f0f0;
    }
    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 2rem;
    }
    .card {
      background: rgba(0, 0, 0, 0.03);
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 10px;
    }
    input, button {
      padding: 0.5rem;
      margin: 0.5rem 0;
    }
    .toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="toggle">
    <button id="toggleTheme">ðŸŒ“</button>
  </div>  <h1>Weight Tracker</h1>
  <div class="card">
    <input type="number" id="weightInput" placeholder="Enter current weight (kg)" />
    <button onclick="submitWeight()">Submit</button>
  </div>  <div class="card">
    <canvas id="weightChart" height="100"></canvas>
  </div>  <div class="card">
    <div>Progress: <span id="progress">0%</span></div>
    <div>BMI: <span id="bmi">-</span></div>
    <div>Calories/day (TDEE): <span id="tdee">-</span></div>
    <div>Est. Burn Needed: <span id="burn">-</span></div>
    <div>Est. Days to Goal: <span id="days">-</span></div>
    <div>Recommended Sleep: 8â€“10 hours</div>
  </div>  <div class="card" id="motivation"></div>  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
    import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDCANiNTmv4bU7ayVyCD_Dwwf04QQ7XlVc",
      authDomain: "weight-tracker-01.firebaseapp.com",
      databaseURL: "https://weight-tracker-01-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "weight-tracker-01",
      storageBucket: "weight-tracker-01.appspot.com",
      messagingSenderId: "560173087855",
      appId: "1:560173087855:web:d6b591b55e6151ac7c619a",
      measurementId: "G-E4MRDK2VZE"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const weightRef = ref(db, 'weights');

    const target = 48;
    const start = 53;
    const height = 1.55; // meters
    const age = 15;

    let chart;
    let weightData = [];
    let labels = [];

    function updateChart() {
      if (chart) chart.destroy();
      chart = new Chart(document.getElementById('weightChart'), {
        type: 'line',
        data: {
          labels,
          datasets: [{
            label: 'Weight (kg)',
            data: weightData,
            borderColor: '#007bff',
            fill: false
          }]
        }
      });
    }

    onValue(weightRef, snapshot => {
      const val = snapshot.val();
      if (!val) return;
      weightData = Object.values(val).map(e => e.weight);
      labels = Object.values(val).map((_, i) => `Day ${i + 1}`);
      updateChart();
      const latest = weightData[weightData.length - 1];
      const bmi = (latest / (height * height)).toFixed(1);
      const bmr = 10 * latest + 6.25 * (height * 100) - 5 * age + 5;
      const tdee = Math.round(bmr * 1.55);
      const toLose = Math.max(latest - target, 0);
      const daysToGoal = Math.ceil((toLose * 7700) / 500);
      const progress = Math.round(((start - latest) / (start - target)) * 100);

      document.getElementById('bmi').textContent = bmi;
      document.getElementById('tdee').textContent = tdee + ' kcal';
      document.getElementById('burn').textContent = '500 kcal/day';
      document.getElementById('days').textContent = daysToGoal;
      document.getElementById('progress').textContent = progress + '%';
    });

    window.submitWeight = () => {
      const weight = parseFloat(document.getElementById('weightInput').value);
      if (!weight) return;
      push(weightRef, { weight });
    };

    const quotes = [
      "Progress, not perfection.",
      "One day at a time.",
      "Discipline over motivation.",
      "Small steps lead to big changes.",
      "Stay consistent, stay committed.",
      "Your only competition is yourself.",
      "You are stronger than you think."
    ];
    document.getElementById('motivation').textContent = 'ðŸ’¬ ' + quotes[Math.floor(Math.random() * quotes.length)];

    const themeToggle = document.getElementById('toggleTheme');
    const setTheme = (mode) => {
      document.documentElement.setAttribute('data-theme', mode);
      localStorage.setItem('theme', mode);
    };
    themeToggle.onclick = () => {
      const current = localStorage.getItem('theme') === 'dark' ? 'light' : 'dark';
      setTheme(current);
    };
    setTheme(localStorage.getItem('theme') || 'light');
  </script></body>
</html>